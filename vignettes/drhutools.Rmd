---
title: ""
author: 
  - 
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Use of goodmap}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE, warning = FALSE)

if (!require(drhutools)) install.packages("drhutools")
library(drhutools)
```
# Installation

To install:

-  The latest released version: `install.packages("drhutools")`.
-  The latest developing version: `remotes::install_github("sammo3182/drhutools")`.


# Basic Usage of `goodmap`

The `goodmap` function is designed to create interactive map animations based on giving dataframe. It supports both point and polygon maps, allowing for versatile data visualization. This vignette will guide you through using the `goodmap` function with practical examples.

## Example of Polygon Map

If the map type is `polygon`, the CSV file should follow the structure below:

| id | city       | prov               | year | variable   |
|----|------------|--------------------|------|------------|
| 1  | 乌鲁木齐  | 新疆维吾尔自治区   | 2010 | 0.2861395  |
| 2  | 拉萨      | 西藏自治区         | 2010 | 0.3881083  |
| 3  | 呼和浩特  | 内蒙古自治区       | 2010 | 0.9466682  |
| 4  | 西宁      | 青海省             | 2011 | 0.8360043  |
| 5  | 成都      | 四川省             | 2011 | 0.4622928  |
| 6  | 哈尔滨    | 黑龙江省           | 2011 | 0.1387102  |

Before loading this function, please set the environment language:

```{r, eval = FALSE}
Sys.setlocale("LC_CTYPE", "en_US.UTF-8")

#Run the function with the data file:

goodmap(data_file, type = "polygon", level = "province", animate = TRUE, animate_var = "year", years = c(2011, 2012))
```

The function returns the file path of the saved map image. The map is also saved as an HTML file for interactive viewing.

### Figure: Animation for 2011 and 2012
```{r out.width = '70%', echo = FALSE}
knitr::include_graphics("preview_polygon.gif")
```

## CSV File Example for Point Type

If the map type is `point`, the CSV file should follow the structure below:

| name                      | year_set | g_lat   | g_lon    | g_pro  | g_city  | type |
|---------------------------|----------|---------|----------|--------|---------|------|
| 中国共产党历史展览馆      | 2021     | 40.00379| 116.3994 | 北京市 | 北京市  | 7    |
| 中央礼品文物管理中心      | 2021     | 39.89785| 116.4109 | 北京市 | 北京市  | 7    |
| 中国美术馆                | 2021     | 39.92535| 116.4090 | 北京市 | 北京市  | 8    |
| 中国电影博物馆            | 2021     | 39.99636| 116.5206 | 北京市 | 北京市  | 8    |
| 中国邮政邮票博物馆        | 2021     | 39.91081| 116.4311 | 北京市 | 北京市  | 8    |
| 中国钱币博物馆            | 2021     | 39.90215| 116.3949 | 北京市 | 北京市  | 8    |

Before loading this function, please set the environment language:

```{r, eval = FALSE}
Sys.setlocale("LC_CTYPE", "en_US.UTF-8")

#Run the function with the data file:

goodmap(data_file, type = "point", animate = TRUE, animate_var = "year", years = 2021)
```

The function returns the file path of the saved map image. The map is also saved as an HTML file for interactive viewing.

### Figure: Animation for 2021
```{r out.width = '70%', echo = FALSE}
knitr::include_graphics("preview_point.gif")
```

# Conclusion
The `goodmap` function offers a flexible way to visualize data geographically. By following the examples above, you can create both point and polygon maps, as well as animations that showcase changes over time. For further details on customizing the maps, refer to the function's documentation.

# Affiliation
